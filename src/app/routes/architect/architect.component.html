<div id="net-reference" fxLayout="row" fxFlexFill>
    <div fxFlex="75" [fxShow]="loading" fxLayoutAlign="center center">
        <p fxFlex="50">
            <mat-progress-bar mode="indeterminate" color="accent"></mat-progress-bar>
        </p>
    </div>
    <div fxFlex="75" [fxShow]="!loading" class="graph-container">
        <div id="graph-tools" fxLayout="row" fxLayoutAlign="space-between center">
            <div fxFlex="50" fxLayout="row" fxLayoutAlign="center center">
                <mat-form-field class="filter" color="accent" fxFlex="75">
                    <mat-slide-toggle [checked]="netFilter.mode" (change)="netFilter.mode = !netFilter.mode" matPrefix class="margin-right-20">
                        <span *ngIf="netFilter.mode">AND</span>
                        <span *ngIf="!netFilter.mode">OR</span>
                    </mat-slide-toggle>
                    <mat-label>{{ 'architect.filter' | translate}}</mat-label>
                    <input matInput type="text" [(ngModel)]="netFilter.tag" (keyup.enter)="filterGraphByTag()">
                    <button matSuffix mat-icon-button (click)="netFilter.tag=''; filterGraphByTag()">
                        <mat-icon>close</mat-icon>
                    </button>
                </mat-form-field>
            </div>

            <mat-form-field color="accent" fxFlex="30">
                <mat-select [(ngModel)]="netFilter.element" (selectionChange)="filterGraphByElement()">
                    <mat-option value="all">{{'architect.filter_element_all' | translate}}</mat-option>
                    <mat-option value="mainonly">{{'architect.filter_element_mainonly' | translate}}</mat-option>
                </mat-select>
            </mat-form-field>

            <button mat-stroked-button color="accent" (click)="filterGraphByTag()"
                    matTooltip="{{'architect.filter_tooltip' | translate}}" matTooltipClass="tooltip-teal">
                <mat-icon>search</mat-icon>
            </button>

            <button mat-icon-button color="accent" (click)="fitNetwork()"
                    matTooltip="{{'architect.center_network' | translate}}"
                    matTooltipClass="tooltip-teal" [matTooltipShowDelay]="1000"
                    matTooltipPosition="left">
                <mat-icon>center_focus_strong</mat-icon>
            </button>
        </div>
        <div id="node-network"></div>
    </div>
    <div fxFlex="25" id="graph-actions">
        <mat-list>
            <div mat-subheader class="subheader">{{'architect.global_actions' | translate}}</div>
            <mat-list-item>
                <div mat-line>
                    <button mat-button (click)="addEdit(null, 'service')">
                        <mat-icon class="color-service">memory</mat-icon>&nbsp;
                        {{'service.add' | translate}}
                    </button>
                </div>
            </mat-list-item>
            <mat-list-item>
                <div mat-line>
                    <button mat-button (click)="addEdit(null, 'route')">
                        <mat-icon class="color-route">timeline</mat-icon>&nbsp;
                        {{'route.add' | translate}}
                    </button>
                </div>
            </mat-list-item>
            <mat-list-item>
                <div mat-line>
                    <button mat-button (click)="addEdit(null, 'upstream')">
                        <mat-icon class="color-upstream">share</mat-icon>&nbsp;
                        {{'upstream.add' | translate}}
                    </button>
                </div>
            </mat-list-item>
            <mat-list-item>
                <div mat-line>
                    <button mat-button (click)="addEdit(null, 'consumer')">
                        <mat-icon class="color-consumer">shopping_cart</mat-icon>&nbsp;
                        {{'consumer.add' | translate}}
                    </button>
                </div>
            </mat-list-item>
            <mat-list-item>
                <div mat-line>
                    <button mat-button (click)="addEdit(null, 'plugin')">
                        <mat-icon class="color-plugin">settings_input_component</mat-icon>&nbsp;
                        {{'plugin.add' | translate}}
                    </button>
                </div>
            </mat-list-item>

            <mat-divider class="margin-top-10 margin-bottom-10" *ngIf="groups.includes(selection.group)"></mat-divider>

            <div mat-subheader class="subheader" *ngIf="groups.includes(selection.group)">
                {{'architect.local_actions_' + selection.group | translate }}&nbsp;<span class="italic">{{ selection.label }}</span>
            </div>
            <mat-list-item *ngIf="groups.includes(selection.group)">
                <div mat-line>
                    <button mat-button (click)="showInfo(selection)">
                        <mat-icon>info</mat-icon>
                        {{'text.info' | translate}}
                    </button>
                </div>
            </mat-list-item>
            <mat-list-item *ngIf="groups.includes(selection.group)">
                <div mat-line>
                    <button mat-button color="accent" (click)="addEdit(selection, selection.group)">
                        <mat-icon>edit</mat-icon>
                        {{'text.edit' | translate}}</button>
                </div>
            </mat-list-item>
            <mat-list-item *ngIf="groups.includes(selection.group)">
                <div mat-line>
                    <button mat-button color="warn" (click)="delete(selection)">
                        <mat-icon>delete</mat-icon>
                        {{'text.delete' | translate}}
                    </button>
                </div>
            </mat-list-item>
            <mat-list-item *ngIf="groups.includes(selection.group)">
                <div mat-line>
                    <button mat-button (click)="addEditPlugin(selection)">
                        <mat-icon class="color-plugin">settings_input_component</mat-icon>&nbsp;
                        {{'plugin.add' | translate}}
                    </button>
                </div>
            </mat-list-item>
            <mat-list-item *ngIf="selection.group === 'upstream'">
                <div mat-line>
                    <button mat-button (click)="addEditPlugin(selection)">
                        <mat-icon class="color-target">gps_fixed</mat-icon>&nbsp;
                        {{'target.add' | translate}}
                    </button>
                </div>
            </mat-list-item>
        </mat-list>
    </div>
</div>
